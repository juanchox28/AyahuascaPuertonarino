try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7f220ff9-1f21-49d7-a3fe-0ed2b3a7d884",e._sentryDebugIdIdentifier="sentry-dbid-7f220ff9-1f21-49d7-a3fe-0ed2b3a7d884")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1956],{2462:(e,t,n)=>{n.d(t,{IQ:()=>a,Jd:()=>r,lx:()=>o});let r=["proMonthlyPromoCode","proAnnualPromoCode","welcomeMessageTitle","utmParams","max5xMonthlyPromoCode","max20xMonthlyPromoCode"],o=e=>{if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},a=(e,t)=>(null==t?void 0:t.overrides)?{...e,...t.overrides}:e},2975:(e,t,n)=>{n.d(t,{ArkoseTokenProvider:()=>p,D5:()=>_,vr:()=>y});var r=n(54568),o=n(77186),a=n(27062),i=n(90119),l=n(44180),s=n(8139),u=n(7620),c=n(10158),d=n(46127);let g="ak-session-token",f=e=>{let{host:t,apiKey:n,nonce:o,integrity:a,onCompleted:i,onShown:l,onShow:c,onHide:d,onError:g,onScriptError:f,setArkoseEnforcement:m}=e,v=e=>{e.setConfig({onCompleted:i,onShown:l,onShow:c,onHide:d,onError:g}),m(e)};return(0,u.useEffect)(()=>()=>{window.setupEnforcement=void 0},[]),(0,r.jsx)(s.default,{id:"arkose-script",src:"https://".concat(t,"/v2/").concat(n,"/api.js"),type:"text/javascript","data-callback":"setupEnforcement",async:!0,defer:!0,onLoad:()=>{window.setupEnforcement||(window.setupEnforcement=v)},onError:f,nonce:o,integrity:a,crossOrigin:"anonymous"})},m=()=>{let e=(0,i.V)(),t=(0,c.fZ)(),{value:n}=(0,a.fS)("ak_enabled");return!e&&t&&n},v=(0,u.createContext)({isReady:!1,isChallenging:!1,lastCallerId:void 0,needsToken:!1,startTokenFlow:()=>{}});function p(e){let{host:t,apiKey:n,nonce:o,integrity:a,children:i}=e,[s,c]=(0,u.useState)(m()&&!!t&&!!n&&!!a),[p,y]=(0,u.useState)(void 0),[_,h]=(0,u.useState)(void 0),[S,w]=(0,u.useState)(!1),[k,b]=(0,d.Vc)(g,void 0),E=s&&!k;return(0,r.jsxs)(v.Provider,{value:{isReady:!!p,isChallenging:S,needsToken:E,lastCallerId:_,startTokenFlow:e=>{h(e),null==p||p.run()}},children:[i,s&&(0,r.jsx)(f,{host:t,apiKey:n,nonce:o,integrity:a,onCompleted:e=>{b(e.token)},onShown:()=>w(!0),onShow:()=>w(!0),onHide:()=>w(!1),onError:e=>{(0,l.Cp)(e.error)},onScriptError:e=>{c(!1),(0,l.Cp)(e)},setArkoseEnforcement:y})]})}function y(){return(0,u.useContext)(v)}let _=()=>{let e=m(),[t,n,r]=(0,d.Vc)(g,void 0),{mutateAsync:a}=(0,o.L2)("api/arkose/verify","POST");return(0,u.useCallback)(async()=>{e&&t&&(r(),await a({session_token:t}))},[e,a,t,r])}},21956:(e,t,n)=>{n.d(t,{Cu:()=>C,F7:()=>k,NA:()=>I,VL:()=>E,Vq:()=>T,WX:()=>w,bl:()=>b,nY:()=>S});var r=n(2975),o=n(10158),a=n(96712),i=n(1761),l=n(69916),s=n(48379),u=n(99539),c=n(63246),d=n(46612),g=n(71473);n(65631);var f=n(27062),m=n(87606),v=n(62942),p=n(7620),y=n(68096),_=n(51869),h=n(40459);let S=()=>{let e=(0,v.useRouter)(),t=(0,a.l)();return{refresh:()=>{e.refresh()},switchAndRefresh:(e,n)=>{t.set(d.eT.LAST_ACTIVE_ORG,e),n?location.pathname=n:location.reload()}}},w=(e,t,n)=>{let r=(0,s.S)(),{mutateAsync:o}=(0,y.nX)();return(0,p.useCallback)(async()=>{if(!e||!r||0===t.length)return;let a=t.map(e=>({document_id:"v3:".concat(e,":").concat(r[e]),accepted_via_checkbox:n}));await o({acceptances:a})},[e,r,t,o,n])},k=e=>{let t=(0,s.S)(),{mutateAsync:n}=(0,y.nX)();return(0,p.useCallback)(async r=>{if(!e||!t)return;let o=Object.entries(r).map(e=>{let[n,r]=e;return{document_id:"v3:".concat(n,":").concat(t[n]),accepted_via_checkbox:r}});0!==o.length&&await n({acceptances:o})},[e,t,n])},b=(e,t)=>{let{account:n,refetch:r,setActiveOrganizationUUID:o}=(0,i.YL)(),[a,s]=(0,p.useState)(!1),[u,c]=(0,p.useState)(!1),d=E(),{addSuccess:f}=(0,l.Y)(),{data:v}=(0,y.kd)(e),_=(0,m.useQueryClient)();return(0,p.useEffect)(()=>{n&&a&&u&&(t?t(d):d())},[u,d,a,n,t]),(0,p.useCallback)(async()=>{s(!0);let e=await r();if(await _.invalidateQueries({queryKey:[g.Jz]}),(null==v?void 0:v.organization_uuid)&&(o(v.organization_uuid),f("Successfully joined ".concat(v.organization_name))),e&&"google"in window){var t,n,a;null==(a=window.google)||null==(n=a.accounts)||null==(t=n.id)||t.cancel()}c(!0)},[v,f,r,o,_])},E=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,v.useSearchParams)().get("returnTo"),n=C(e);return(0,p.useCallback)(()=>{n(t)},[n,t])},C=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{account:t}=(0,i.YL)(),[n,a]=(0,p.useState)(!1),l=(0,v.useRouter)(),[s,d]=(0,p.useState)(null),g=(0,v.usePathname)(),m=(0,v.useSearchParams)(),y=(0,o.fZ)(),S=(e=>{let{account:t}=(0,i.YL)(),n=(0,u.y_)(e),o=(0,r.D5)(),{value:a}=(0,f.fS)("age_gate_reverification");return((0,p.useEffect)(()=>{t&&o()},[t,o]),t&&((0,c.VH)({account:t,isClaudeDot:e})||(0,c.Bs)(t,e)))?"/onboarding":t&&(0,c.u5)(t,e,a)?"/age-verification":t&&(0,c.NJ)(t,e)?"/invites":t&&(0,c.Ah)(t,e)?"/create":t&&n?"/upgrade":e?"/new":"/dashboard"})(y);return(0,p.useEffect)(()=>{(n||e)&&!t&&l.push((0,_.rt)(g,m.toString()))},[t,l,n,e,g,m]),(0,p.useEffect)(()=>{if(n&&t){let e=(0,_.Cy)(t,s,S,y,!!h.env.NEXT_PUBLIC_SHOW_US_GOVT_SYSTEM_USE_NOTIFICATION);e!==window.location.href.replace(window.location.origin,"")&&(l.push(e),l.refresh())}},[t,l,n,s,S,y]),(0,p.useCallback)(e=>{e&&d(decodeURIComponent(e)),a(!0)},[])};function T(){let[e,t]=(0,p.useState)(!1);return{getRecaptchaToken:(0,p.useCallback)(async(e,n)=>h.env.NEXT_PUBLIC_DISABLE_RECAPTCHA?Promise.resolve("recaptcha-ignore-token"):(t(!0),new Promise((r,o)=>{if("undefined"==typeof grecaptcha)return t(!1),o(Error("Recaptcha failed to load"));grecaptcha.enterprise.ready(()=>{grecaptcha.enterprise.execute(e,{action:n}).then(e=>{r(e),t(!1)},e=>{t(!1),o(e)})})})),[]),isLoading:e}}function I(e){let[t,n]=(0,p.useState)(!1);(0,p.useEffect)(()=>{if(!t){let t=setInterval(()=>{(window.grecaptcha||h.env.NEXT_PUBLIC_DISABLE_RECAPTCHA)&&(n(!0),e())},10);return()=>clearInterval(t)}},[t,n,e])}},46127:(e,t,n)=>{n.d(t,{Vc:()=>i,Wz:()=>a});var r=n(30686),o=n(7620);function a(e,t){return(0,r.F)({key:"SSS-".concat(e),defaultValue:t,serialize:JSON.stringify,deserialize:e=>void 0===e?t:JSON.parse(e)})}function i(e,t){return function(e){var t,n,r;let{key:a,defaultValue:i,deserialize:l=JSON.parse,getInitialValueInEffect:s=!1,sync:u=!0}=e,c="LSS-".concat(a),d=(0,o.useRef)(null!=(r=null==(t=(n=crypto).randomUUID)?void 0:t.call(n))?r:"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2))),g=(0,o.useRef)(!1),[f,m]=(0,o.useState)(()=>{if(s)return i;try{let e=window.localStorage.getItem(c);if(e){let t=JSON.parse(e);if(t&&"object"==typeof t&&"value"in t)return t.value;return l(e)}}catch(e){console.warn("Error reading localStorage key “".concat(c,"”:"),e)}return i});(0,o.useEffect)(()=>{if(s)try{let e=window.localStorage.getItem(c);if(e){let t=JSON.parse(e);t&&"object"==typeof t&&"value"in t?m(t.value):m(l(e))}}catch(e){console.warn("Error reading localStorage key “".concat(c,"”:"),e)}},[c,l,s]);let v=(0,o.useCallback)(e=>{g.current=!0,m(t=>{let n="function"==typeof e?e(t):e;try{let e={value:n,tabId:d.current,timestamp:Date.now()},t=JSON.stringify(e);if(window.localStorage.setItem(c,t),u){let e=new StorageEvent("storage",{key:c,newValue:t,oldValue:window.localStorage.getItem(c),storageArea:window.localStorage,url:window.location.href});window.dispatchEvent(e)}}catch(e){console.warn("Error writing localStorage key “".concat(c,"”:"),e)}return n}),Promise.resolve().then(()=>{g.current=!1})},[c,u]),p=(0,o.useCallback)(()=>{window.localStorage.removeItem(c),m(i)},[c,i]);return(0,o.useEffect)(()=>{if(!u)return;let e=e=>{if(e.key===c&&e.newValue&&!g.current)try{let t=JSON.parse(e.newValue);if(t&&"object"==typeof t&&"value"in t&&"tabId"in t){if(t.tabId===d.current)return;m(t.value)}else m(l(e.newValue))}catch(e){console.warn("Error handling storage event for “".concat(c,"”:"),e)}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[c,u,l]),[f,v,p]}({key:e,defaultValue:t,deserialize:e=>void 0===e?t:JSON.parse(e),getInitialValueInEffect:!1,sync:!0})}},48379:(e,t,n)=>{n.d(t,{LegalDocsProvider:()=>i,S:()=>l});var r=n(54568),o=n(7620);let a=(0,o.createContext)(void 0),i=e=>{let{value:t,children:n}=e;return(0,r.jsx)(a.Provider,{value:t,children:n})};function l(){return(0,o.useContext)(a)}},51869:(e,t,n)=>{n.d(t,{CZ:()=>c,Cy:()=>a,HT:()=>s,TR:()=>u,q:()=>l,rt:()=>i});var r=n(63246),o=n(46612);let a=(e,t,n,a,i)=>{if(i&&!localStorage.getItem(o.EB.ACCEPTED_US_GOVERNMENT_SYSTEM_NOTIFICATION))return"/us-govt-system-warning";if(!t||!t.startsWith("/")||"/"===t||"/?"===t)return n;if((0,r.Xs)(e,a)){let e=new URL(n,window.location.origin),r=new URLSearchParams(e.search);return r.set("returnTo",t),"".concat(e.pathname,"?").concat(r.toString())}return l(t)},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/login",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="".concat(e,"?").concat(t),a=new URLSearchParams(r);return a.append("returnTo",o),"".concat(n,"?").concat(a.toString())};function l(e){let t=new URL(e,"http://example.com");return t.pathname.replace(/^\/+/,"/")+t.search}function s(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return t&&e.push(...Object.keys(localStorage).filter(e=>e.startsWith("".concat(o.sn,".")))),e.reduce((e,t)=>{let n=localStorage.getItem(t);return null!==n&&e.push([t,n]),e},[])}function u(e){e.forEach(e=>{let[t,n]=e;localStorage.setItem(t,n)})}function c(e){if(!e)return null;try{let t=decodeURIComponent(e);return new URL(t,window.location.origin).searchParams}catch(e){return null}}},63246:(e,t,n)=>{n.d(t,{Ah:()=>i,Bs:()=>o,NJ:()=>a,VH:()=>r,Xs:()=>s,u5:()=>l});let r=e=>{let{account:t,isClaudeDot:n}=e;return n?!1===t.settings.has_finished_claudeai_onboarding:!t.full_name||!t.display_name},o=(e,t)=>t&&!e.is_verified,a=(e,t)=>!!function(e,t){for(let n of e.invites)if(n.organization.capabilities&&n.organization.capabilities.includes(t))return n}(e,t?"raven":"api"),i=(e,t)=>!t&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n&&t&&!e.age_is_verified},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r({account:e,isClaudeDot:t})||o(e,t)||a(e,t)||i(e,t)||l(e,t,n)}},68096:(e,t,n)=>{n.d(t,{B5:()=>f,BL:()=>w,DK:()=>m,IX:()=>I,Jy:()=>k,Ng:()=>h,Nv:()=>S,QP:()=>L,Z5:()=>_,a0:()=>v,gz:()=>P,jU:()=>E,kd:()=>T,mY:()=>y,nX:()=>b,vt:()=>g,zt:()=>p});var r=n(98518),o=n(77186),a=n(10158),i=n(29585),l=n(87296),s=n(71473),u=n(21036),c=n(87606),d=n(62942);function g(e,t){return(0,o.Sk)("/api/auth/login_methods?email=".concat(encodeURIComponent(e||""),"&source=").concat(t),{enabled:!!e&&(0,l.B9)(e),meta:{noToast:!0}})}let f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,r.st)(),n=(0,a.fZ)();return(0,o.L2)("/api/auth/send_magic_link","POST",{...e,onSuccess:(n,r,o)=>{n.sso_url?t({event_key:"login.email.sso_initiated"}):t({event_key:"login.email.magic_link_sent"}),e.onSuccess&&e.onSuccess(n,r,o)},onError:(n,r,o)=>{t({event_key:"login.email.magic_link_send_error",error:n.message,error_type:n instanceof i.LG?n.type:"unknown"}),e.onError&&e.onError(n,r,o)},onMutate:e=>{t({event_key:"login.email.sending_magic_link"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.fZ)();return(0,o.L2)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,r.st)(),n=(0,a.fZ)(),l=(0,a.Mk)(),{client:s}=(0,u.useStatsigClient)();return(0,o.L2)("/api/auth/verify_magic_link","POST",{...e,onSuccess:(n,r,o)=>{"code"===r.credentials.method?t({event_key:"login.email.finished"}):t({event_key:"login.email.magic_link_success"}),C(s,n,t,"email","magic_link",l),e.onSuccess&&e.onSuccess(n,r,o)},onError:(n,r,o)=>{if("code"===r.credentials.method){let e="unknown";"already_used"===n.message?e="already_used":n instanceof i.LG&&"rate_limit_error"===n.type?e="rate_limit":n instanceof i.LG&&400===n.statusCode&&(e="incorrect_code"),t({event_key:"login.email.code_verification_error",error:n.message,error_type:e})}else t({event_key:"login.email.magic_link_verification_error",error:n.message});e.onError&&e.onError(n,r,o)},onMutate:e=>{"code"===e.credentials.method?t({event_key:"login.email.verifying_code"}):t({event_key:"login.email.verifying_magic_link"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,r.st)(),n=(0,a.fZ)(),i=(0,a.Mk)(),l=(0,d.useRouter)(),{client:s}=(0,u.useStatsigClient)();return(0,o.L2)("/api/auth/verify_google","POST",{...e,onSuccess:(n,r,o)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),l.push(n.sso_url)):(t({event_key:"login.google.finished"}),C(s,n,t,"google","button",i),e.onSuccess&&e.onSuccess(n,r,o))},onError:(n,r,o)=>{t({event_key:"login.google.verification_error",error:n.message}),e.onError&&e.onError(n,r,o)},onMutate:e=>{t({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,r.st)(),n=(0,a.fZ)(),i=(0,a.Mk)(),l=(0,d.useRouter)(),{client:s}=(0,u.useStatsigClient)();return(0,o.L2)("/api/auth/verify_google_mobile","POST",{...e,onSuccess:(n,r,o)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),l.push(n.sso_url)):(t({event_key:"login.google.finished",flow_type:"one_tap"}),C(s,n,t,"google","onetap",i),e.onSuccess&&e.onSuccess(n,r,o))},onError:(n,r,o)=>{t({event_key:"login.google.verification_error",error:n.message}),e.onError&&e.onError(n,r,o)},onMutate:e=>{t({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,r.st)(),n=(0,a.fZ)(),i=(0,d.useRouter)();return(0,o.L2)("/api/auth/accept_invite","POST",{...e,onSuccess:(n,r,o)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),i.push(n.sso_url)):e.onSuccess&&e.onSuccess(n,r,o)},transformVariables:e=>({...e,source:n?"claude":"console"})})},h=()=>(0,o.L2)("/api/auth/logout","POST"),S=()=>(0,o.L2)("/api/auth/logout/all-sessions","POST"),w=()=>{let e=(0,c.useQueryClient)();return(0,o.L2)("/api/account?statsig_hashing_algorithm=djb2","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[s.Rw]})}})},k=()=>(0,o.Qv)("/api/account?statsig_hashing_algorithm=djb2","PUT",(e,t)=>(null==t?void 0:t.account)?{...t,account:{...t.account,settings:e}}:t,{queryKey:[s.Rw],transformVariables:e=>({settings:e})}),b=()=>{let e=(0,c.useQueryClient)();return(0,o.L2)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[s.Rw]})}})},E=()=>(0,o.L2)("/api/account/email_consent","PUT");function C(e,t,n,r,o,a){t.created&&n({event_key:"login.account.created",surface:a,authMethod:r,flow:o},t.account)}function T(e){return(0,o.Sk)("/api/signups/".concat(e),{enabled:!!e,staleTime:0})}function I(e){return(0,o.Sk)("/api/enterprise_auth/idp_redirect_url?organization_id=".concat(e),{meta:{noToast:!0}})}function P(e,t,n){return(0,o.Sk)("/api/enterprise_auth/sso_callback?code=".concat(e,"&state=").concat(t,"&source=").concat(n),{meta:{noToast:!0}})}function L(e,t){var n;let r=(0,c.useQueryClient)();return(0,o.L2)("/api/highside/login","GET",{...t,headers:{...null!=(n=t.headers)?n:{},...e},async onSuccess(){for(var e,n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];await r.invalidateQueries({queryKey:[s.Rw]}),null==(e=t.onSuccess)||e.call(t,...o)}})}},69916:(e,t,n)=>{n.d(t,{ErrorsProvider:()=>w,i:()=>C,Y:()=>k});var r=n(54568),o=n(63246),a=n(27062),i=n(44180),l=n(90819),s=n.n(l),u=n(58648),c=n.n(u),d=n(26836),g=n.n(d),f=n(62942),m=n(7620),v=n(75006),p=n(1761);function y(e,t){let n=[];for(let r of e){if(null==r)continue;let e=_(r,t+1);""!==e&&n.push(e)}return n.length>0?n.join(" "):""}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>5?"":e instanceof Error?e.message:"string"==typeof e||"number"==typeof e||"boolean"==typeof e?String(e):m.isValidElement(e)?function e(t,n){var r;let o=t.props;return"object"==typeof o&&null!==o&&"defaultMessage"in o&&"string"==typeof o.defaultMessage?o.defaultMessage:"object"==typeof o&&null!==o&&"children"in o?(r=o.children,"string"==typeof r||"number"==typeof r||"boolean"==typeof r?String(r):null==r?"":Array.isArray(r)?y(r,n+1):m.isValidElement(r)?e(r,n+1):_(r,n+1)):""}(e,t):Array.isArray(e)?y(e,t):""}var h=n(46127);let S=(0,m.createContext)(void 0);function w(e){let{children:t}=e,n=(0,m.useRef)(1),[o,a]=(0,m.useState)([]),l=(0,m.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),s=(0,m.useCallback)((e,t)=>{let r=n.current++;if(e instanceof Error)(0,i.Cp)(e,{tags:{source:"error-toast"},extra:{toastId:r}});else{let t=_(e),n=t?"User-facing error toast: ".concat(t.substring(0,200)).concat(t.length>200?"...":""):"User-facing error toast";(0,i.Cp)(Error(n),{tags:{source:"error-toast",errorType:"string"==typeof e?"string":"react-element"},extra:{toastId:r,extractedText:t.substring(0,1e3)}})}return a(t=>[...t,{id:r,message:e instanceof Error?e.message:e,toastType:"error"}]),t&&setTimeout(()=>l(r),t),r},[l]),u=(0,m.useCallback)((e,t)=>{let r=n.current++;return a(t=>[...t,{id:r,message:e,toastType:"success"}]),t&&setTimeout(()=>l(r),t),r},[l]),c=(0,m.useMemo)(()=>({toasts:o,addError:s,addSuccess:u,clearToast:l}),[o,s,u,l]);return(0,r.jsx)(S.Provider,{value:c,children:t})}function k(){let e=(0,m.useContext)(S);if(!e)throw Error("Must be called within ErrorsProvider");return e}let b=v.z.object({id:v.z.string().optional().nullable(),title:v.z.string().optional().nullable(),message:v.z.string().optional().nullable(),displayFrequencyHours:v.z.number().optional().nullable()}),E={};function C(){var e;let{id:t,title:n,message:r,displayFrequencyHours:i}=(0,a.iW)("claude_system_message",E,b),{account:l}=(0,p.YL)(),u=null!=(e=null==l?void 0:l.uuid)?e:"logged-out",d=(0,f.usePathname)(),[v,y]=(0,h.Vc)("dismissed-system-messages",{}),_=(0,m.useMemo)(()=>()=>y(e=>{let n=s()(e);return t&&g()(n,[u,t],Date.now()),n}),[y,u,t]);return(0,m.useMemo)(()=>{if(!l||(0,o.Xs)(l,!0)||"/download"===d||!t)return!1;let e=c()(v,[u,t]);return!e||"boolean"==typeof e||!!i&&Date.now()-e>=60*i*6e4},[l,t,u,v,i,d])?{currentSystemMessageId:t,currentSystemMessageTitle:n,currentSystemMessageContent:r,dismissCurrentSystemMessage:_}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},87296:(e,t,n)=>{n.d(t,{B9:()=>o,Lj:()=>a});let r=/^[A-Za-z0-9._%+\u0027-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$/,o=e=>r.test(e),a=(e,t)=>{if(!t)return!1;let n=e.split("@")[1];return t.includes(n)}},99539:(e,t,n)=>{n.d(t,{Hc:()=>m,XK:()=>v,Zl:()=>y,hz:()=>f,y_:()=>p});var r=n(77186),o=n(96712),a=n(69916),i=n(46612),l=n(71473),s=n(27062),u=n(7620),c=n(46760),d=n(75006),g=n(2462);function f(){var e;let t=(0,o.l)(),n=null!=(e=t.get(i.eT.PROMOTION))?e:null;return{data:(0,g.lx)(n),mutate:(0,u.useCallback)(e=>{t.set(i.eT.PROMOTION,JSON.stringify(e),{maxAgeSeconds:7776e3})},[t]),delete:(0,u.useCallback)(()=>{t.delete(i.eT.PROMOTION)},[t])}}function m(){var e,t,n;let{data:o}=f(),a=(t=null!=(e=null==o?void 0:o.promotionId)?e:null,n=e=>(0,g.IQ)(e,o),(0,r.Sk)("/api/billing/promotion/".concat(t),{queryKey:[l.t6,t],enabled:!!t,meta:{noToast:!0}},e=>(e.promotionId=t,n)?n(e):e));return{...a,isPending:a.isPending&&!!(null==o?void 0:o.promotionId)}}function v(){let{data:e,mutate:t}=f();(0,u.useEffect)(()=>{(null==e?void 0:e.needsCheckout)&&(e.needsCheckout=void 0,t(e))},[e,t])}function p(e){let{data:t,mutate:n}=f(),r=null==t?void 0:t.promotionId,o=(0,s.T9)("claude_ai_targeted_promotion","promotionId",null,d.z.string().nullable());return(0,u.useEffect)(()=>{!r&&o&&n({promotionId:o})},[r,o,n]),!!e&&!!(null==t?void 0:t.needsCheckout)&&!!(null==t?void 0:t.promotionId)}let y=()=>{let e=(0,u.useRef)(!1),t=(0,a.Y)(),n=(0,c.A)(),{delete:r}=f();return(0,u.useCallback)(o=>{(null==o?void 0:o.offerError)&&!e.current&&(e.current=!0,t.addError(n.formatMessage({defaultMessage:"This promotion is not available for your account",id:"Vu9kt6ezVH"})),r())},[t,r,n])}}}]);